## Работа с вложенными компонентами, props, keys

### Компонентный подход

Для того, чтобы у нас не было одного большого файла с кодом, используются вложенные компоненты - туда будет переноситься часть кода.
   
Основной принцип - компоненты должны быть минимального размера, их будет много, и они должны быть переиспользуемыми.

Компоненты можно вкладывать друг в друга.

Здесь можно провести параллель с БЭМ. Все что в БЭМе мы бы считали отдельным блоком (независимый кусок кода), в Реакте чаще всего имеет смысл выделять в отдельный компонент.

Все компоненты в Реакте могут носить расширение как `.js`, так и `.jsx`. Разницы никакой.
   
Для каждого компонента лучше создавать свою папку - туда потом будут добавляться файлы стилей, тесты и т.д. 
   
Существует два подхода именования файла с компонентом - когда файл можно назвать именем компонента, или просто `index.js`. Во втором случае строка импорта компонента будет короче, но сам файл сложнее будет найти в IDE по имени.
   
Классы компонентов обязательно должны начинаться с большой буквы - таким образом React отделяет компоненты от обычных HTML тегов, которые всегда начинаются с маленькой буквы.

### Передача параметров в дочерние компоненты

Мы можем передавать параметры в дочерние компоненты с помощью HTML синтаксиса атрибутов.
   
Все параметры во вложенном компоненте приходят в свойство `this.props`. Их также можно увидеть в инспекторе в React Developer Tools.

При чтении параметров из `this.props` также всегда используем синтаксис деструктуризации.

Все данные, переданные между открывающим и закрывающим тегом компонента, приходят в него в переменной `this.props.children`.

Дочерние компоненты могут взаимодействовать и менять состояние родительского компонента с помощью переданной функции-коллбека. Это пока единственный способ, так как в Реакте всегда используется однонаправленный поток данных.
   
В качестве props вы можете передавать из родительского компонента в дочерний что угодно - строки, объекты, числа, функции, и даже куски JSX кода.

При изменении props, или при перерендере родительского компонента, дочерний компонент также будет перерендерен.

Важная разница между классами `Component` и `PureComponent`. При наследовании компонента от `PureComponent` - при повтороном рендере родительского компонента, если пропсы дочернего компонента не меняются, он не будет перерендерен. Поэтому при работе с классовыми компонентами желательно всегда наследоваться от `PureComponent`.

### Работа с массивами в React

Массивы можно выводить на экран, но это обязательно должен быть массив элементов, каждый из которых Реакт знает как отобразить. Это либо строки/числа, либо JSX выражения.

Чтобы превратить массив объектов в массив JSX выражений, используется функция массивов `.map()`:
   
```js
const emailCards = emails
    .map(email => (
      <div key={email.id}>
        {email.topic}
      </div>
    ));
```
   
При работе с массивами обязательно корневому элементу надо задать уникальный атрибут `key` - благодаря ему при повторном рендере компонента React знает, что именно изменилось в массиве.
